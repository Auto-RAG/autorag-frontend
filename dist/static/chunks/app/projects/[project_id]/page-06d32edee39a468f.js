(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{39794:(e,s,a)=>{Promise.resolve().then(a.bind(a,68237))},68237:(e,s,a)=>{"use strict";a.d(s,{ProjectDetail:()=>S});var t=a(95155),l=a(12115),r=a(76046),i=a(15922),n=a(47217),c=a(67163),d=a(90110),o=a(31645),m=a(68487),x=a(14150),h=a(94908),u=a(67655),f=a(40886),p=a(13950),j=a(93518),g=a(14081),v=a(63348),b=a(87365),N=a(67401);let y=(0,N.A)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),w=(0,N.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),k=[{title:"Document Parsing",description:"Configure document parsing settings and select files",icon:(0,t.jsx)(g.A,{className:"h-5 w-5"})},{title:"Text Chunking",description:"Set up text chunking parameters",icon:(0,t.jsx)(y,{className:"h-5 w-5"})},{title:"QA Generation",description:"Configure QA generation settings",icon:(0,t.jsx)(v.A,{className:"h-5 w-5"})}];function C(e){let{isOpen:s,onOpenChange:a,projectId:r}=e,[i,n]=(0,l.useState)(0),[c,d]=(0,l.useState)({parsing:{glob_path:"",name:"",config:{}},chunking:{trial_id:"",name:"",config:{}},qa:{trial_id:"",name:"",qa_num:5,preset:"basic",llm_config:{llm_name:"",llm_params:{}}}}),o=async()=>{if(i===k.length-1)try{let e=await fetch("/api/projects/".concat(r,"/preparation/parse"),{method:"POST",body:JSON.stringify(c.parsing)}),s=await e.json(),t=await fetch("/api/projects/".concat(r,"/preparation/chunk"),{method:"POST",body:JSON.stringify({...c.chunking,trial_id:s.trial_id})}),l=await t.json();await fetch("/api/projects/".concat(r,"/preparation/qa"),{method:"POST",body:JSON.stringify({...c.qa,trial_id:l.trial_id})}),a(!1)}catch(e){console.error("Error creating trial:",e)}else n(e=>e+1)};return(0,t.jsx)(h.bL,{open:s,onOpenChange:a,children:(0,t.jsxs)(h.ZL,{children:[(0,t.jsx)(h.hJ,{className:"fixed inset-0 bg-black/50"}),(0,t.jsxs)(h.UC,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-[90vw] max-w-2xl max-h-[85vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"flex justify-between",children:k.map((e,s)=>(0,t.jsxs)("div",{className:"flex flex-col items-center w-1/3 ".concat(s===i?"text-primary":s<i?"text-gray-500":"text-gray-300"),children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center mb-2 ".concat(s===i?"border-primary bg-primary/10":s<i?"border-gray-500 bg-gray-100":"border-gray-300"),children:e.icon}),(0,t.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]},s))}),(0,t.jsx)("div",{className:"relative mt-2",children:(0,t.jsx)("div",{className:"absolute top-0 left-0 h-1 bg-gray-200 w-full rounded",children:(0,t.jsx)("div",{className:"absolute top-0 left-0 h-full bg-primary rounded transition-all duration-300",style:{width:"".concat((i+1)/k.length*100,"%")}})})})]}),(0,t.jsx)(h.hE,{className:"text-xl font-semibold mb-4",children:k[i].title}),(0,t.jsx)(h.VY,{className:"text-gray-500 dark:text-gray-400 mb-6",children:k[i].description}),(()=>{switch(i){case 0:return(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"globPath",children:"Document Path Pattern"}),(0,t.jsx)("input",{className:"w-full px-3 py-2 border rounded-md",id:"globPath",placeholder:"e.g., /data/docs/**/*.pdf",type:"text",value:c.parsing.glob_path,onChange:e=>d(s=>({...s,parsing:{...s.parsing,glob_path:e.target.value}}))})]})});case 1:return(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"chunkSize",children:"Chunk Size"}),(0,t.jsx)("input",{className:"w-full px-3 py-2 border rounded-md",id:"chunkSize",placeholder:"Enter chunk size",type:"number",value:c.chunking.config.toString()||"",onChange:e=>d(s=>({...s,chunking:{...s.chunking,config:{...s.chunking.config,chunk_size:parseInt(e.target.value)}}}))})]})});case 2:return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"qaNum",children:"Number of QA Pairs"}),(0,t.jsx)("input",{className:"w-full px-3 py-2 border rounded-md",id:"qaNum",placeholder:"Enter number of QA pairs",type:"number",value:c.qa.qa_num,onChange:e=>d(s=>({...s,qa:{...s.qa,qa_num:parseInt(e.target.value)}}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"preset",children:"Preset"}),(0,t.jsxs)("select",{className:"w-full px-3 py-2 border rounded-md",id:"preset",value:c.qa.preset,onChange:e=>d(s=>({...s,qa:{...s.qa,preset:e.target.value}})),children:[(0,t.jsx)("option",{value:"basic",children:"Basic"}),(0,t.jsx)("option",{value:"simple",children:"Simple"}),(0,t.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"llmName",children:"LLM Name"}),(0,t.jsx)("input",{className:"w-full px-3 py-2 border rounded-md",id:"llmName",placeholder:"Enter LLM name",type:"text",value:c.qa.llm_config.llm_name,onChange:e=>d(s=>({...s,qa:{...s.qa,llm_config:{...s.qa.llm_config,llm_name:e.target.value}}}))})]})]});default:return null}})(),(0,t.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,t.jsx)(x.T,{color:"default",disabled:0===i,startContent:(0,t.jsx)(j.A,{size:16}),variant:"flat",onClick:()=>{n(e=>e-1)},children:"Back"}),(0,t.jsx)(x.T,{color:"primary",endContent:i===k.length-1?void 0:(0,t.jsx)(w,{size:16}),onClick:o,children:i===k.length-1?"Create Trial":"Next"})]}),(0,t.jsx)(h.bm,{asChild:!0,children:(0,t.jsx)("button",{"aria-label":"Close",className:"absolute top-4 right-4 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,t.jsx)(b.MKb,{className:"h-4 w-4"})})})]})]})})}var _=a(31641),T=a(35007);let A=[{id:"1",name:"Trial #1",status:"completed",created_at:"2024-03-01T10:00:00Z",config_yaml:""},{id:"2",name:"Trial #2",status:"in_progress",created_at:"2024-03-02T15:30:00Z",config_yaml:""},{id:"3",name:"Trial #3",status:"failed",created_at:"2024-03-03T09:45:00Z",config_yaml:""}];function S(e){let{projectId:s}=e,a=(0,r.useRouter)(),[b,N]=(0,l.useState)("overview"),[y,w]=(0,l.useState)(!1),[k,S]=(0,l.useState)(A),[R,Z]=(0,l.useState)([]),[q,B]=(0,l.useState)(!0);(0,l.useEffect)(()=>{},[s]);let O=e=>{switch(e){case"completed":return"text-green-500";case"in_progress":return"text-blue-500";case"failed":return"text-red-500";default:return"text-gray-500"}};return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.T,{color:"default",startContent:(0,t.jsx)(j.A,{size:16}),variant:"light",onClick:()=>a.back(),children:"Back"}),(0,t.jsx)("h1",{className:"text-2xl font-bold mt-2",children:"Project Details"})]}),(0,t.jsxs)(h.bL,{open:y,onOpenChange:w,children:[(0,t.jsx)(h.l9,{asChild:!0,children:(0,t.jsx)(x.T,{color:"primary",startContent:(0,t.jsx)(u.A,{size:16}),children:"New Trial"})}),(0,t.jsxs)(h.ZL,{children:[(0,t.jsx)(h.hJ,{className:"fixed inset-0 bg-black/50"}),(0,t.jsx)(C,{isOpen:y,projectId:s,onOpenChange:w})]})]})]}),(0,t.jsxs)(_.tU,{className:"w-full",value:b,onValueChange:N,children:[(0,t.jsxs)(_.j7,{className:"grid w-full grid-cols-5",children:[(0,t.jsxs)(_.Xi,{className:"flex items-center gap-2",value:"overview",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),"Overview"]}),(0,t.jsxs)(_.Xi,{className:"flex items-center gap-2",value:"trials",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),"Trials"]}),(0,t.jsxs)(_.Xi,{className:"flex items-center gap-2",value:"results",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),"Results"]}),(0,t.jsxs)(_.Xi,{className:"flex items-center gap-2",value:"chat",children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),"Chat"]})]}),(0,t.jsx)(_.av,{value:"overview",children:(0,t.jsxs)(T.Zp,{children:[(0,t.jsx)(T.aR,{children:(0,t.jsx)(T.ZB,{children:"Project Overview"})}),(0,t.jsx)(T.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(T.Zp,{children:[(0,t.jsxs)(T.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(T.ZB,{className:"text-sm font-medium",children:"Total Trials"}),(0,t.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(T.Wu,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:k.length})})]}),(0,t.jsxs)(T.Zp,{children:[(0,t.jsxs)(T.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(T.ZB,{className:"text-sm font-medium",children:"Active Tasks"}),(0,t.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(T.Wu,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:R.filter(e=>"in_progress"===e.status).length})})]}),(0,t.jsxs)(T.Zp,{children:[(0,t.jsxs)(T.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(T.ZB,{className:"text-sm font-medium",children:"Success Rate"}),(0,t.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(T.Wu,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[(R.filter(e=>"completed"===e.status).length/R.length*100||0).toFixed(1),"%"]})})]})]})})]})}),(0,t.jsx)(_.av,{value:"trials",children:(0,t.jsxs)(T.Zp,{children:[(0,t.jsx)(T.aR,{children:(0,t.jsx)(T.ZB,{children:"Trials"})}),(0,t.jsx)(T.Wu,{children:(0,t.jsxs)(i.j,{"aria-label":"Trials list",children:[(0,t.jsxs)(n.X,{children:[(0,t.jsx)(c.e,{children:"NAME"}),(0,t.jsx)(c.e,{children:"STATUS"}),(0,t.jsx)(c.e,{children:"CREATED AT"}),(0,t.jsx)(c.e,{children:"ACTIONS"})]}),(0,t.jsx)(d.E,{children:k.map(e=>(0,t.jsxs)(o.s,{children:[(0,t.jsx)(m.w,{children:e.name}),(0,t.jsx)(m.w,{children:(0,t.jsx)("span",{className:O(e.status),children:e.status})}),(0,t.jsx)(m.w,{children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)(m.w,{children:(0,t.jsx)(x.T,{color:"primary",size:"sm",variant:"flat",onClick:()=>a.push("/projects/".concat(s,"/trials/").concat(e.id)),children:"View Details"})})]},e.id))})]})})]})}),(0,t.jsx)(_.av,{value:"results",children:(0,t.jsxs)(T.Zp,{children:[(0,t.jsx)(T.aR,{children:(0,t.jsx)(T.ZB,{children:"Results"})}),(0,t.jsx)(T.Wu,{})]})}),(0,t.jsx)(_.av,{value:"chat",children:(0,t.jsxs)(T.Zp,{children:[(0,t.jsx)(T.aR,{children:(0,t.jsx)(T.ZB,{children:"Chat Interface"})}),(0,t.jsx)(T.Wu,{})]})})]})]})}},35007:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>n});var t=a(95155),l=a(12115),r=a(29602);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...l})});i.displayName="Card";let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});n.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("font-semibold leading-none tracking-tight",a),...l})});c.displayName="CardTitle";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});d.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},31641:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>n});var t=a(95155),l=a(12115),r=a(19986),i=a(29602);let n=r.bL,c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.B8,{ref:s,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...l})});c.displayName=r.B8.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...l})});d.displayName=r.l9.displayName;let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})});o.displayName=r.UC.displayName},29602:(e,s,a)=>{"use strict";a.d(s,{cn:()=>r});var t=a(43463),l=a(69795);function r(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.QP)((0,t.$)(s))}},67655:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(67401).A)("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[105,12,158,470,150,898,441,517,358],()=>s(39794)),_N_E=e.O()}]);